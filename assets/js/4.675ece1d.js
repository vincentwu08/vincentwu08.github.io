(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{205:function(e,t,a){e.exports=a.p+"assets/img/20191205112713.71b2de76.jpg"},213:function(e,t,a){"use strict";a.r(t);var n=a(2),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"apachebench"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#apachebench"}},[e._v("#")]),e._v(" ApacheBench")]),e._v(" "),n("p",[e._v("    ApacheBench可创建并发访问线程，模拟多个用户同时对某一地址进行访问，用来测试Web服务器的负载压力。")]),e._v(" "),n("h2",{attrs:{id:"_1、安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装"}},[e._v("#")]),e._v(" 1、安装")]),e._v(" "),n("ul",[n("li",[e._v("1.1 Ubuntu："),n("code",[e._v("apt-cache install apache2-util")]),e._v(";")]),e._v(" "),n("li",[e._v("1.2 CentOS："),n("code",[e._v("yum install httpd-tools")]),e._v(";")]),e._v(" "),n("li",[e._v("1.3 MacOS与Linux均有自带。")])]),e._v(" "),n("h2",{attrs:{id:"_2、命令及其参数选项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、命令及其参数选项"}},[e._v("#")]),e._v(" 2、命令及其参数选项")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("Usage: ab [options] [http[s]://]hostname[:port]/path\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("Options are:")]),e._v(" "),n("pre",[n("code",[e._v("-n requests     Number of requests to perform\n-c concurrency  Number of multiple requests to make at a time\n-t timelimit    Seconds to max. to spend on benchmarking\n                This implies -n 50000\n-s timeout      Seconds to max. wait for each response\n                Default is 30 seconds\n-b windowsize   Size of TCP send/receive buffer, in bytes\n-B address      Address to bind to when making outgoing connections\n-p postfile     File containing data to POST. Remember also to set -T\n-u putfile      File containing data to PUT. Remember also to set -T\n-T content-type Content-type header to use for POST/PUT data, eg.\n                'application/x-www-form-urlencoded'\n                Default is 'text/plain'\n-v verbosity    How much troubleshooting info to print\n-w              Print out results in HTML tables\n-i              Use HEAD instead of GET\n-x attributes   String to insert as table attributes\n-y attributes   String to insert as tr attributes\n-z attributes   String to insert as td or th attributes\n-C attribute    Add cookie, eg. 'Apache=1234'. (repeatable)\n-H attribute    Add Arbitrary header line, eg. 'Accept-Encoding: gzip'\n                Inserted after all normal header lines. (repeatable)\n-A attribute    Add Basic WWW Authentication, the attributes\n                are a colon separated username and password.\n-P attribute    Add Basic Proxy Authentication, the attributes\n                are a colon separated username and password.\n-X proxy:port   Proxyserver and port number to use\n-V              Print version number and exit\n-k              Use HTTP KeepAlive feature\n-d              Do not show percentiles served table.\n-S              Do not show confidence estimators and warnings.\n-q              Do not show progress when doing more than 150 requests\n-l              Accept variable document length (use this for dynamic pages)\n-g filename     Output collected data to gnuplot format file.\n-e filename     Output CSV file with percentages served\n-r              Don't exit on socket receive errors.\n-m method       Method name\n-h              Display usage information (this message)\n-I              Disable TLS Server Name Indication (SNI) extension\n-Z ciphersuite  Specify SSL/TLS cipher suite (See openssl ciphers)\n-f protocol     Specify SSL/TLS protocol\n                (TLS1, TLS1.1, TLS1.2 or ALL)\n")])]),e._v(" "),n("h5",{attrs:{id:"含义："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#含义："}},[e._v("#")]),e._v(" 含义：")]),e._v(" "),n("ul",[n("li",[e._v("-n requests：执行的请求个数（即本次测试需访问页面的次数）")]),e._v(" "),n("li",[e._v("-c concurrency：并发数（即本次测试同时访问的用户数）")]),e._v(" "),n("li",[e._v("-t timelimit：限制测试进行时长，单位为秒。其内部隐含值是-n 50000")])]),e._v(" "),n("h2",{attrs:{id:"_3、测试结果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、测试结果"}},[e._v("#")]),e._v(" 3、测试结果")]),e._v(" "),n("h3",{attrs:{id:"_3-1-get方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-get方式"}},[e._v("#")]),e._v(" 3.1 Get方式")]),e._v(" "),n("p",[e._v("使用如下命令进行测试：")]),e._v(" "),n("p",[n("code",[e._v("ab -n 100 -c 100 https://aliyun.com/")])]),e._v(" "),n("ul",[n("li",[e._v("-n: 100个请求")]),e._v(" "),n("li",[e._v("-c: 100个并发")])]),e._v(" "),n("p",[n("img",{attrs:{src:a(205),alt:"alt text",title:"实践结果"}})]),e._v(" "),n("ul",[n("li",[e._v("Total transferred: 请求的响应数据长度总和，包括HTTP响应头和正文数据（不包括HTTP请求数据长度）")]),e._v(" "),n("li",[e._v("HTML transferred: 请求的响应数据正文数据总和。")]),e._v(" "),n("li",[e._v("Requests per second: 平均每秒请求数，吞吐率。反映了接口的并发承受能力，即系统的峰值性能。")]),e._v(" "),n("li",[e._v("Time per request:       611.667 [ms] (mean) : 请求响应时间，即一次并发所用时长。")]),e._v(" "),n("li",[e._v("Time per request:       6.117 [ms] (mean, across all concurrent requests) 每个请求的时长。")]),e._v(" "),n("li",[e._v("Transfer rate: 请求在单位时间内从服务器获取到的数据长度，说明当服务器的处理能力达到极限时，其出口宽带的需求量。")])]),e._v(" "),n("h3",{attrs:{id:"_3-2-post方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-post方式"}},[e._v("#")]),e._v(" 3.2 Post方式")]),e._v(" "),n("p",[e._v("使用如下命令进行测试：")]),e._v(" "),n("p",[n("code",[e._v("ab -t 60 -c 5000 -p data.txt -T 'application/json' http://www.xx.com/b.php")])]),e._v(" "),n("ul",[n("li",[e._v("-t: 请求60秒")]),e._v(" "),n("li",[e._v("-T: .txt参数类型")])]),e._v(" "),n("p",[e._v("data.txt内容：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('{"data":"{\\"id\\":\\"007dc145\\",\\"lat\\":\\"23.040892\\",\\"lon\\":\\"113.151031\\"}"}\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])])])}),[],!1,null,null,null);t.default=s.exports}}]);